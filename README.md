
### пуш в гит
git add . 
git commit -m 'Результат первой практики по FastAPI'
git push 


## Описание

Это веб-приложение для управления задачами с использованием матрицы Эйзенхауэра. Приложение состоит из FastAPI бэкенда и фронтенда на HTML/CSS/JavaScript.

## Быстрый старт

### Требования
- Python 3.8+
- FastAPI
- SQLAlchemy
- Современный веб-браузер

### Установка и запуск

1. **Клонирование репозитория:**
```bash
git clone <repository-url>
cd ToDo-API-BSBO
```

2. **Создание виртуального окружения:**
```bash
python -m venv venv
source venv/bin/activate  # Для Windows: venv\Scripts\activate
```

3. **Установка зависимостей:**
```bash
pip install -r requirements.txt
```

4. **Запуск бэкенда:**
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

5. **Доступ к приложению:**
- Фронтенд: `http://localhost:8000/frontend/index.html`
- API документация: `http://localhost:8000/docs`
- Панель управления: `http://localhost:8000/frontend/dashboard.html`

## Структура проекта

```
ToDo-API-BSBO/
├── main.py                 # Основной файл FastAPI приложения
├── requirements.txt           # Зависимости Python
├── database.py             # Настройки базы данных SQLite
├── models.py               # SQLAlchemy модели данных
├── schemas.py              # Pydantic схемы для API
├── routers/                # API роутеры
│   ├── auth.py            # Аутентификация и регистрация
│   ├── tasks.py           # Управление задачами
│   ├── stats.py           # Статистика
│   └── admin.py           # Админ-панель
├── frontend/               # Фронтенд
│   ├── index.html         # Страница входа
│   ├── dashboard.html      # Основная панель управления
│   ├── css/
│   │   └── style.css     # Стили приложения
│   └── js/
│       └── app.js          # Основная логика фронтенда
└── README.md               # Этот файл
```

## Аутентификация

### Регистрация нового пользователя
- **Endpoint:** `POST /api/v3/register`
- **Тело запроса:**
```json
{
    "nickname": "имя_пользователя",
    "email": "user@example.com", 
    "password": "пароль_минимум_6_символов"
}
```

### Вход в систему
- **Endpoint:** `POST /api/v3/login`
- **Тело запроса:**
```json
{
    "email": "user@example.com",
    "password": "пароль"
}
```
- **Ответ:** JWT токен для доступа к API

## Управление задачами

### Создание задачи
- **Endpoint:** `POST /api/v3/`
- **Тело запроса:**
```json
{
    "title": "Название задачи",
    "description": "Описание задачи",
    "is_important": true,
    "deadline_at": "2024-01-20T10:00:00"
}
```

### Получение списка задач
- **Endpoint:** `GET /api/v3/`
- **Ответ:** Массив задач с полями:
  - `id` - уникальный идентификатор
  - `title` - название задачи
  - `description` - описание
  - `is_important` - важность
  - `deadline_at` - дедлайн
  - `completed` - статус выполнения
  - `quadrant` - квадрант (Q1, Q2, Q3, Q4)
  - `created_at` - дата создания

### Изменение задачи
- **Endpoint:** `PUT /api/v3/task/{task_id}`
- **Тело запроса:** аналогично созданию

### Удаление задачи
- **Endpoint:** `DELETE /api/v3/task/{task_id}`
- **Защита:** Требуется подтверждение удаления

### Изменение статуса задачи
- **Endpoint:** `PATCH /api/v3/task/{task_id}/complete`
- **Действие:** Переключает статус выполнено/не выполнено

## Матрица Эйзенхауэра

Задачи автоматически классифицируются по квадрантам:

| Квадрант | Описание                     | Критерии                              |
|-----------|------------------------------|----------------------------------------|
| **Q1**    | Важные и срочные          | Важно + Дедлайн скоро          |
| **Q2**    | Важные, не срочные       | Важно + Дедлайн далеко          |
| **Q3**    | Срочные, не важные        | Неважно + Дедлайн скоро         |
| **Q4**    | Не важные, не срочные       | Неважно + Дедлайн далеко         |

## Статистика

### Доступные эндпоинты
- `GET /api/v3/stats/` - общая статистика
- `GET /api/v3/stats/deadlines` - статистика по дедлайнам
- `GET /api/v3/stats/today` - задачи на сегодня

### Метрики
- Общее количество задач
- Количество выполненных задач
- Процент выполнения
- Распределение по квадрантам
- Статистика дедлайнов

## Админ-панель

Доступна только для пользователей с ролью `admin`.

### Функции
- Просмотр всех пользователей
- Управление ролями пользователей
- Статистика по пользователям
- Просмотр задач всех пользователей

## Конфигурация

### Переменные окружения
- `DATABASE_URL` - путь к файлу SQLite базы данных
- `SECRET_KEY` - секретный ключ для JWT токенов
- `ALGORITHM` - алгоритм хеширования паролей

### Настройка базы данных
База данных SQLite создается автоматически при первом запуске приложения.

## Отладка

### Логирование
- Все ошибки логируются в консоль
- API запросы логируются для отладки
- Подробная информация об ошибках в ответах API

### Общие проблемы и решения

1. **Ошибка 404 при загрузке задач**
   - **Причина:** Неверный URL эндпоинта
   - **Решение:** Использовать `GET /api/v3/` вместо `GET /api/v3/tasks`

2. **Ошибка 422 при создании задачи**
   - **Причина:** Неверные данные в запросе
   - **Решение:** Проверить обязательные поля и форматы данных

3. **Проблемы с CORS**
   - **Причина:** Неверная конфигурация CORS
   - **Решение:** Настроить CORS middleware в FastAPI

## API Документация

После запуска приложения доступна интерактивная документация:
- **URL:** `http://localhost:8000/docs`
- **Формат:** OpenAPI/Swagger UI
- **Описание:** Все доступные эндпоинты с примерами запросов/ответов

## Фронтенд

### Основные страницы
- **index.html** - страница аутентификации
- **dashboard.html** - основная панель управления задачами

### Функциональность
- ✅ Создание, редактирование, удаление задач
- ✅ Отметка задач выполненными
- ✅ Фильтрация по статусу и квадрантам
- ✅ Просмотр статистики
- ✅ Управление профилем

### Интерактивные элементы
- **Галочки** - для отметки выполнения задач
- **Кнопки редактирования** - иконка карандаша
- **Кнопки удаления** - иконка мусорки с подтверждением
- **Модальные окна** - для создания/редактирования задач

## Безопасность

### Защита API
- JWT токены для аутентификации
- Хеширование паролей (bcrypt)
- Валидация входных данных
- CORS защита

### Рекомендации
- Использовать HTTPS в production
- Регулярно обновлять зависимости
- Настроить логирование ошибок
- Ограничить размер загружаемых файлов

## Поддержка

Если возникли проблемы:
1. Проверьте логи консоли браузера
2. Проверьте логи сервера
3. Очистите кэш браузера
4. Убедитесь, что сервер запущен и доступен

---
